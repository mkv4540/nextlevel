#!/bin/sh
# ============================================================
#  PRE-PUSH HOOK â€” Blocks direct push to main / master
# ============================================================
protected_branch="main master"

while read local_ref local_sha remote_ref remote_sha; do
  branch=$(echo "$remote_ref" | sed 's|refs/heads/||')
  for pb in $protected_branch; do
    if [ "$branch" = "$pb" ]; then
      echo ""
      echo "  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
      echo "  â•‘   ğŸš«  DIRECT PUSH TO '$branch' IS NOT ALLOWED!       â•‘"
      echo "  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£"
      echo "  â•‘  Please follow the correct workflow:                 â•‘"
      echo "  â•‘                                                      â•‘"
      echo "  â•‘  1. Create a feature branch:                         â•‘"
      echo "  â•‘     git checkout -b feature/your-feature-name        â•‘"
      echo "  â•‘                                                      â•‘"
      echo "  â•‘  2. Push the feature branch:                         â•‘"
      echo "  â•‘     git push origin feature/your-feature-name        â•‘"
      echo "  â•‘                                                      â•‘"
      echo "  â•‘  3. Open a Pull Request on GitHub.                   â•‘"
      echo "  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
      echo ""
      exit 1
    fi
  done
done

exit 0
