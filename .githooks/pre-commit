#!/bin/sh
# ============================================================
#  PRE-COMMIT HOOK â€” Blocks commits directly on main / master
# ============================================================
branch=$(git symbolic-ref HEAD 2>/dev/null | sed 's|refs/heads/||')

if [ "$branch" = "main" ] || [ "$branch" = "master" ]; then
  echo ""
  echo "  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
  echo "  â•‘   ğŸš«  COMMITTING DIRECTLY TO '$branch' NOT ALLOWED!  â•‘"
  echo "  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£"
  echo "  â•‘  You are on the protected branch: $branch             â•‘"
  echo "  â•‘                                                      â•‘"
  echo "  â•‘  Please switch to a feature branch first:            â•‘"
  echo "  â•‘     git checkout -b feature/your-feature-name        â•‘"
  echo "  â•‘     git add .                                         â•‘"
  echo "  â•‘     git commit -m 'your message'                     â•‘"
  echo "  â•‘     git push origin feature/your-feature-name        â•‘"
  echo "  â•‘     Then open a Pull Request on GitHub.              â•‘"
  echo "  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
  echo ""
  exit 1
fi

exit 0
