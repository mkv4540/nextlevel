(()=>{var e={};e.id=360,e.ids=[360],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},340:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>j,routeModule:()=>m,serverHooks:()=>k,workAsyncStorage:()=>b,workUnitAsyncStorage:()=>y});var n={};r.r(n),r.d(n,{POST:()=>x});var s=r(42706),a=r(28203),i=r(45994),o=r(39187);let c=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/i,l="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.83 Safari/537.36,gzip(gfe)",u=/<text start="([^"]*)" dur="([^"]*)">([^<]*)<\/text>/g;class p extends Error{constructor(e){super(`[YoutubeTranscript] ðŸš¨ ${e}`)}}class d extends p{constructor(){super("YouTube is receiving too many requests from this IP and now requires solving a captcha to continue")}}class g extends p{constructor(e){super(`The video is no longer available (${e})`)}}class h extends p{constructor(e){super(`Transcript is disabled on this video (${e})`)}}class v extends p{constructor(e){super(`No transcripts are available for this video (${e})`)}}class w extends p{constructor(e,t,r){super(`No transcripts are available in ${e} this video (${r}). Available languages: ${t.join(", ")}`)}}class f{static fetchTranscript(e,t){var r,n,s,a,i;return n=this,s=void 0,a=void 0,i=function*(){let n=this.retrieveVideoId(e),s=yield fetch(`https://www.youtube.com/watch?v=${n}`,{headers:Object.assign(Object.assign({},(null==t?void 0:t.lang)&&{"Accept-Language":t.lang}),{"User-Agent":l})}),a=yield s.text(),i=a.split('"captions":');if(i.length<=1){if(a.includes('class="g-recaptcha"'))throw new d;if(!a.includes('"playabilityStatus":'))throw new g(e);throw new h(e)}let o=null===(r=(()=>{try{return JSON.parse(i[1].split(',"videoDetails')[0].replace("\n",""))}catch(e){return}})())||void 0===r?void 0:r.playerCaptionsTracklistRenderer;if(!o)throw new h(e);if(!("captionTracks"in o))throw new v(e);if((null==t?void 0:t.lang)&&!o.captionTracks.some(e=>e.languageCode===(null==t?void 0:t.lang)))throw new w(null==t?void 0:t.lang,o.captionTracks.map(e=>e.languageCode),e);let c=((null==t?void 0:t.lang)?o.captionTracks.find(e=>e.languageCode===(null==t?void 0:t.lang)):o.captionTracks[0]).baseUrl,p=yield fetch(c,{headers:Object.assign(Object.assign({},(null==t?void 0:t.lang)&&{"Accept-Language":t.lang}),{"User-Agent":l})});if(!p.ok)throw new v(e);return[...(yield p.text()).matchAll(u)].map(e=>{var r;return{text:e[3],duration:parseFloat(e[2]),offset:parseFloat(e[1]),lang:null!==(r=null==t?void 0:t.lang)&&void 0!==r?r:o.captionTracks[0].languageCode}})},new(a||(a=Promise))(function(e,t){function r(e){try{c(i.next(e))}catch(e){t(e)}}function o(e){try{c(i.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):((n=t.value)instanceof a?n:new a(function(e){e(n)})).then(r,o)}c((i=i.apply(n,s||[])).next())})}static retrieveVideoId(e){if(11===e.length)return e;let t=e.match(c);if(t&&t.length)return t[1];throw new p("Impossible to retrieve Youtube video ID.")}}async function x(e){try{let{videoId:t}=await e.json();if(!t)return o.NextResponse.json({error:"Video ID is required"},{status:400});let r=`https://www.youtube.com/watch?v=${t}`,n=(await f.fetchTranscript(r)).map(e=>e.text).join(" ");return console.log(n),o.NextResponse.json({transcript:n})}catch(e){return console.error("Error fetching transcript:",e),o.NextResponse.json({error:e.message||"Failed to fetch transcript"},{status:500})}}let m=new s.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/transcript/route",pathname:"/api/transcript",filename:"route",bundlePath:"app/api/transcript/route"},resolvedPagePath:"C:\\Users\\sahil\\Desktop\\nextlevel\\next_level\\src\\app\\api\\transcript\\route.js",nextConfigOutput:"",userland:n}),{workAsyncStorage:b,workUnitAsyncStorage:y,serverHooks:k}=m;function j(){return(0,i.patchFetch)({workAsyncStorage:b,workUnitAsyncStorage:y})}},96487:()=>{},78335:()=>{},42706:(e,t,r)=>{"use strict";e.exports=r(44870)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[994,187],()=>r(340));module.exports=n})();