(()=>{var e={};e.id=413,e.ids=[413],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},62613:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>y,routeModule:()=>m,serverHooks:()=>w,workAsyncStorage:()=>f,workUnitAsyncStorage:()=>g});var s={};r.r(s),r.d(s,{GET:()=>x,POST:()=>p});var n=r(42706),o=r(28203),a=r(45994),i=r(39187);let u=require("@aws-sdk/client-s3"),l={"nextlevel-classnotes":"nextlevel-classnotes","ncert-notes-nextlevel":"ncert-notes-nextlevel"},c=new u.S3Client({region:"ap-south-1",credentials:{accessKeyId:"AKIAWQUOZH5VCL33PTO6",secretAccessKey:"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"}});async function d(e,t,r,s){let n=`${r}/`,o=`${n}${t}`,a=new u.PutObjectCommand({Bucket:s,Key:o,Body:e,ContentType:"application/pdf"});return await c.send(a),o}async function p(e){try{let t=await e.formData(),r=t.get("file"),s=t.get("folderName"),n=t.get("fileName"),o="true"===t.get("isExistingFolder"),a=t.get("bucketName");if(!r||!s||!n||!a)return i.NextResponse.json({error:"File, folder name, file name, and bucket name are required"},{status:400});let p=l[a];if(!p)return i.NextResponse.json({error:"Invalid bucket name"},{status:400});let x=Buffer.from(await r.arrayBuffer()),m=`${s}/`;try{let e=new u.HeadObjectCommand({Bucket:p,Key:m});if(await c.send(e),!o)return i.NextResponse.json({error:"Folder already exists. Choose 'Existing Folder' instead."},{status:400})}catch(e){if(404===e.$metadata.httpStatusCode){if(o)return i.NextResponse.json({error:"Folder does not exist. Choose 'New Folder' instead."},{status:400});let e=new u.PutObjectCommand({Bucket:p,Key:m,Body:""});await c.send(e)}else throw e}let f=await d(x,n,s,p);return i.NextResponse.json({success:!0,fileName:f})}catch(e){return console.log(e),i.NextResponse.json({error:"Error uploading file"})}}async function x(){try{let e=new u.ListObjectsV2Command({Bucket:"nextlevel-classnotes",Delimiter:"/"}),t=await c.send(e),r=t.CommonPrefixes?.map(e=>e.Prefix.replace("/",""))||[];return i.NextResponse.json({success:!0,folders:r})}catch(e){return console.log(e),i.NextResponse.json({error:"Error fetching folders"})}}let m=new n.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/upload/route",pathname:"/api/upload",filename:"route",bundlePath:"app/api/upload/route"},resolvedPagePath:"C:\\Users\\sahil\\Desktop\\nextlevel\\next_level\\src\\app\\api\\upload\\route.js",nextConfigOutput:"",userland:s}),{workAsyncStorage:f,workUnitAsyncStorage:g,serverHooks:w}=m;function y(){return(0,a.patchFetch)({workAsyncStorage:f,workUnitAsyncStorage:g})}},96487:()=>{},78335:()=>{},42706:(e,t,r)=>{"use strict";e.exports=r(44870)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[994,187],()=>r(62613));module.exports=s})();