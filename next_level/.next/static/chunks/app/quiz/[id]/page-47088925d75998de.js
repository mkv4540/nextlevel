(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[200],{811:(e,t,r)=>{Promise.resolve().then(r.bind(r,8074))},6046:(e,t,r)=>{"use strict";var s=r(6658);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},8074:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(5155),a=r(9173),n=r(6046),i=r(2115),l=r(8195);let o=e=>{let{label:t,value:r,onChange:a,type:n="text",placeholder:i,error:l}=e;return(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,s.jsx)("input",{type:n,value:r,onChange:a,placeholder:i,className:"w-full p-2 border rounded text-gray-800 ".concat(l?"border-red-500":"border-gray-300"),"aria-invalid":l?"true":"false"}),l&&(0,s.jsx)("p",{className:"text-sm text-red-500 mt-1",children:l})]})},u=e=>{let{onSubmit:t}=e,[r,a]=(0,i.useState)(""),[n,l]=(0,i.useState)(""),[u,d]=(0,i.useState)(""),[c,m]=(0,i.useState)({}),h=(0,i.useRef)(null),g=()=>{let e={};if(r.trim()||(e.name="Name is required."),n.trim()?/\S+@\S+\.\S+/.test(n)||(e.email="Invalid email format."):e.email="Email is required.",u.trim()||(e.upiId="UPI ID is required."),m(e),Object.keys(e).length>0){let e=h.current;return e&&e.focus(),!1}return!0},p=()=>{g()&&t({name:r,email:n,upiId:u})};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",role:"dialog","aria-labelledby":"dialog-title",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full shadow-lg",children:[(0,s.jsx)("h3",{id:"dialog-title",className:"text-lg font-bold mb-4 text-gray-800",children:"Enter Your Details"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),p()},children:[(0,s.jsx)(o,{label:"Name",value:r,onChange:e=>a(e.target.value),placeholder:"Name",error:c.name,ref:h}),(0,s.jsx)(o,{label:"Email ID",type:"email",value:n,onChange:e=>l(e.target.value),placeholder:"Email ID",error:c.email}),(0,s.jsx)(o,{label:"UPI ID",value:u,onChange:e=>d(e.target.value),placeholder:"UPI ID",error:c.upiId}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-green-600 text-white py-2 rounded hover:bg-green-700 focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Submit"})]})]})})};function d(){var e,t;let{isLoaded:r,userId:o}=(0,a.d)(),d=(0,n.useParams)(),c=(0,n.useRouter)(),[m,h]=(0,i.useState)(null),[g,p]=(0,i.useState)([]),[b,x]=(0,i.useState)(0),[y,f]=(0,i.useState)(null),[w,v]=(0,i.useState)([]),[j,N]=(0,i.useState)(null),[S,C]=(0,i.useState)(!0),[q,k]=(0,i.useState)(!1),[I,P]=(0,i.useState)(!0),[E,z]=(0,i.useState)(null);(0,i.useEffect)(()=>{let e=d.id;for(let t of Object.values(l.t)){let r=t.find(t=>t.id===e);if(r){h(r),N(60*r.duration);break}}},[d.id]),(0,i.useEffect)(()=>{if(null===j)return;if(0===j){R();return}let e=setInterval(()=>{N(e=>e-1)},1e3);return()=>clearInterval(e)},[j]);let _=async e=>{try{let e=await fetch("https://opentdb.com/api.php?amount=10&type=multiple"),t=(await e.json()).results.map(e=>({question:e.question,correct_answer:e.correct_answer,options:D([...e.incorrect_answers,e.correct_answer])}));p(t),v(Array(t.length).fill(null)),C(!1)}catch(e){console.error("Error fetching questions:",e),C(!1)}},D=e=>{for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e},Q=e=>{f(e);let t=[...w];t[b]=e,v(t)},R=async()=>{let e=0;g.forEach((t,r)=>{t.options[w[r]]===t.correct_answer&&e++}),c.push("/quiz/result?score=".concat(e,"&total=").concat(g.length,"&reward=").concat(m.reward,"&username=").concat(encodeURIComponent(E.name)))};return S&&!I?(0,s.jsx)("div",{className:"min-h-screen pt-20 flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):(0,s.jsxs)("main",{className:"min-h-screen pt-20 pb-8",children:[I&&(0,s.jsx)(u,{onSubmit:e=>{z(e),P(!1),m&&_(m.questions)}}),!I&&(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-xl text-gray-800 font-bold",children:null==m?void 0:m.title}),(0,s.jsxs)("div",{className:"text-purple-600 font-medium",children:["Time Left: ",Math.floor(j/60),":",(j%60).toString().padStart(2,"0")]})]})}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("span",{className:"text-gray-800 font-bold",children:["Question ",b+1," of ",g.length]}),(0,s.jsx)("h2",{className:"text-gray-800 font-medium mt-2",children:null===(e=g[b])||void 0===e?void 0:e.question})]}),(0,s.jsx)("div",{className:"space-y-3 font-sm text-gray-800",children:null===(t=g[b])||void 0===t?void 0:t.options.map((e,t)=>(0,s.jsx)("button",{onClick:()=>Q(t),className:"w-full text-left p-3 rounded border transition-colors\n                    ".concat(y===t?"border-purple-600 bg-purple-50":"border-gray-200 hover:border-purple-300"),children:e},t))})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("button",{onClick:()=>{b>0&&(x(e=>e-1),f(w[b-1]))},disabled:0===b,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 disabled:opacity-50",children:"Previous"}),b===g.length-1?(0,s.jsx)("button",{onClick:()=>k(!0),className:"px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Submit Quiz"}):(0,s.jsx)("button",{onClick:()=>{b<g.length-1&&(x(e=>e+1),f(w[b+1]))},className:"px-6 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:"Next"})]})]}),q&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full",children:[(0,s.jsx)("h3",{className:"text-lg font-bold mb-4 text-gray-800",children:"Submit Quiz?"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"Are you sure you want to submit your quiz? You can't change your answers after submission."}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>k(!1),className:"flex-1 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Cancel"}),(0,s.jsx)("button",{onClick:R,className:"flex-1 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Submit"})]})]})})]})}},8195:(e,t,r)=>{"use strict";r.d(t,{t:()=>s,w:()=>a});let s={History:[{id:"history-ancient",title:"Ancient History",description:"Test your knowledge of ancient civilizations",entryCost:20,reward:100,duration:15,questions:10},{id:"history-modern",title:"Modern History",description:"Challenge yourself with modern history questions",entryCost:30,reward:150,duration:15,questions:10}],Geography:[{id:"geography-world",title:"World Geography",description:"Explore world geography concepts",entryCost:25,reward:125,duration:15,questions:10},{id:"geography-india",title:"Indian Geography",description:"Test your knowledge of Indian geography",entryCost:30,reward:150,duration:15,questions:10}],Science:[{id:"science-physics",title:"Physics Quiz",description:"Challenge your physics knowledge",entryCost:40,reward:200,duration:15,questions:10},{id:"science-chemistry",title:"Chemistry Quiz",description:"Test your chemistry concepts",entryCost:40,reward:200,duration:15,questions:10}],Mathematics:[{id:"math-algebra",title:"Algebra Quiz",description:"Solve algebraic problems",entryCost:50,reward:250,duration:15,questions:10},{id:"math-geometry",title:"Geometry Quiz",description:"Test your geometric concepts",entryCost:50,reward:250,duration:15,questions:10}]},a=100}},e=>{var t=t=>e(e.s=t);e.O(0,[173,441,517,120],()=>t(811)),_N_E=e.O()}]);