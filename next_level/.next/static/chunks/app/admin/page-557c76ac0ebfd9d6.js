(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{5924:(e,t,a)=>{Promise.resolve().then(a.bind(a,6226))},6046:(e,t,a)=>{"use strict";var s=a(6658);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},6226:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(5155),l=a(2115),r=a(6046);let n=()=>{let[e,t]=(0,l.useState)(null),[a,r]=(0,l.useState)(""),[n,i]=(0,l.useState)(""),[d,u]=(0,l.useState)(!1),[o,c]=(0,l.useState)(null),[x,m]=(0,l.useState)(!0),[p,h]=(0,l.useState)("nextlevel-classnotes"),[f,g]=(0,l.useState)([]),y=async s=>{if(s.preventDefault(),!e||!n||!a||!p)return;u(!0);let l=new FormData;l.append("file",e),l.append("fileName",a),l.append("folderName",n),l.append("isExistingFolder",x),l.append("bucketName",p);try{let e=await fetch("/api/upload",{method:"POST",body:l}),a=await e.json();a.success?(c({text:"File uploaded successfully!",type:"success"}),t(null),r(""),i("")):c({text:a.error||"Failed to upload file.",type:"error"})}catch(e){c({text:"An error occurred. Please try again.",type:"error"})}finally{u(!1),setTimeout(()=>c(null),3e3)}};return(0,s.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,s.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 w-96",children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-center mb-6",children:"Upload Files to S3 Bucket"}),o&&(0,s.jsx)("div",{className:"mb-4 text-center p-2 rounded ".concat("success"===o.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:o.text}),(0,s.jsxs)("form",{onSubmit:y,className:"flex flex-col items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"radio",name:"folderType",checked:x,onChange:()=>m(!0)}),"Existing Folder"]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"radio",name:"folderType",checked:!x,onChange:()=>m(!1)}),"New Folder"]})]}),(0,s.jsxs)("select",{value:p,onChange:e=>h(e.target.value),className:"w-full px-4 py-2 border rounded text-gray-700",children:[(0,s.jsx)("option",{value:"nextlevel-classnotes",children:"nextlevel-classnotes"}),(0,s.jsx)("option",{value:"ncert-notes-nextlevel",children:"ncert-notes-nextlevel"})]}),(0,s.jsx)("input",{type:"text",value:a,onChange:e=>r(e.target.value),placeholder:"Enter file name",className:"w-full px-4 py-2 border rounded text-gray-700"}),(0,s.jsx)("input",{type:"text",value:n,onChange:e=>i(e.target.value),placeholder:"Enter ".concat(x?"existing":"new"," folder name"),className:"w-full px-4 py-2 border rounded text-gray-700"}),(0,s.jsx)("input",{type:"file",onChange:e=>{t(e.target.files[0])},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border file:border-gray-300 file:bg-gray-50 file:text-gray-700 hover:file:bg-gray-100"}),(0,s.jsx)("button",{type:"submit",disabled:!e||!a||!n||d,className:"w-full py-2 rounded text-white font-semibold ".concat(!d&&e&&a&&n?"bg-red-500 hover:bg-red-600":"bg-gray-400 cursor-not-allowed"),children:d?"Uploading...":"Upload"})]}),f.length>0&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Existing Folders:"}),(0,s.jsx)("ul",{children:f.map(e=>(0,s.jsx)("li",{className:"text-gray-700",children:e},e))})]})]})})};function i(){let[e,t]=(0,l.useState)(""),[a,i]=(0,l.useState)(""),[d,u]=(0,l.useState)(""),[o,c]=(0,l.useState)(""),[x,m]=(0,l.useState)(!1),p=(0,r.useRouter)(),h=async t=>{t.preventDefault(),c("");try{let t=await fetch("/api/verifyAdmin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:e,adminName:a,adminPassword:d})}),s=await t.json();200===t.status&&"verified"===s.status?(c("Verified! Redirecting..."),m(!0),setTimeout(()=>{p.push("/admin")},3e3)):c("Invalid credentials. Please try again.")}catch(e){console.error("Error verifying admin:",e),c("An error occurred. Please try again later.")}};return x?(0,s.jsx)(n,{}):(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:(0,s.jsxs)("div",{className:"bg-white p-8 rounded shadow-md w-full max-w-sm",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-center mb-6",children:"Admin Authentication"}),(0,s.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Admin ID"}),(0,s.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-2 border rounded",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Admin Name"}),(0,s.jsx)("input",{type:"text",value:a,onChange:e=>i(e.target.value),className:"w-full px-4 py-2 border rounded",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Admin Password"}),(0,s.jsx)("input",{type:"password",value:d,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 border rounded",required:!0})]}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition",children:"Submit"})]}),o&&(0,s.jsx)("p",{className:"mt-4 text-center text-red-600",children:o})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,120],()=>t(5924)),_N_E=e.O()}]);